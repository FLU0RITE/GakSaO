# 2장. 이상한 나라의 객체

### ✅ 상태, **행동**, 식별자 → 객체

☑️ 상태 

> 상태는 특정 시점에 객체가 가지고 있는 정보의 집합으로 객체의 구조적 특징을 표현한다. 객체의 상태는 객체에 존재하는 정적인 프로퍼티와 동적인 프로퍼티 값으로 구성된다. 객체의 프로퍼티는 단순한 값과 다른 객체를 참조하는 링크로 구분할 수 있다.
> 

- 어떤 행동의 결과는 과거에 어떤 행동들이 일어났었느냐에 의존
- 과거에 했던 행동을 기억해야 결과를 예측할 수 있다.
- 따라서 과거에 했던 행동을 기억하기 위해 “상태”라는 개념이 필요하다.

→ 즉, 상태를 알면 과거의 행동 이력을 설명하지 않아도 행동의 결과를 쉽게 예측이 가능하다.

- 상태는 객체가 아니다.
- 상태는 객체를 표현하기 위해 사용된다.
- 프로퍼티 : 객체의 상태를 구성하는 모든 특징 (정적)
- 프로퍼티 값 : 시간의 흐름에 따라 변경 (동적)

☑️ 행동 (자율적)

> 행동이란 외부의 요청 또는 수신된 메시지에 응답하기 위해 동작하고 반응하는 활동이다. 행동의 결과로 객체는 자신의 상태를 변경하거나 다른 객체에게 메시지를 전달할 수 있다. 객체는 행동을 통해 다른 객체와의 협력에 참여하므로 행동은 외부에 가시적이여야 한다.
> 

- 스스로의 행동에 의해서만 상태가 변경되는 것을 보장함으로써 객체의 자율성을 유지한다.
- 객체지향의 기본 사상은 상태와 상태를 조작하기 위한 행동을 하나의 단위로 묶는 것

→ 객체의 상태를 변경하는 것은 객체의 자발적인 행동 뿐이다.

- 객체가 다른 객체와 협력하기 위해서는 요청을 해야한다. 즉, 메시지를 통해서만 의사소통이 가능하다.
- 행동은 아래 두 가지의 부수효과를 낸다.
    1. 객체 자신의 상태 변경
    2. 행동 내에서 협력하는 다른 객체에 대한 메시지 전송

- 객체는 자율적이여야 한다. 따라서 각자의 상태는 각자가 책임져야 한다. (상태를 숨기고, 행동을 노출)
    - 객체는 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않는다.
    - 객체가 외부에 노출하는 것은 행동뿐이며, 외부에서 객체에 접근할 수 있는 유일한 방법은 행동 뿐이다.

✔️ 엘리스가 음료를 마시는 행동을 객체지향원칙을 지켜서 작성 해보자

```java
@Component
public class Person{ //인터페이스로 하면 좋긴 하겠다
	private final Beverage beverage; //이렇게 의존해도 되는가?

	private Person(Beverage beverage) { //생성자 주입
		this.beverage = beverage;
	}
	
	public void drinkBeverage(int quantity) { 
		//음료의 상태가 변경되는지는 나는 모른다~
		beverage.drunken(quantity); //요청을 잘 던졌는가?
	}
}
```

```java
@Component
public class Beverage{
	private int total; //상태를 유지해도 되는가?
	
	public void drunken(int quantity) { 
		if(total - quantity >= 0){ //마실지 말지는 내가 정한다.
			total -= quantity;
		}
	}
}
```

- 단일 책임 원칙(SRP)
- 개방-폐쇄 원칙(OCP)
- ~~리스코프 치환 원칙(LSP)~~
- ~~인터페이스 분리 원칙(ISP)~~
- ~~의존 역전 원칙 (DIP)~~

→ 상태를 잘 정의된 행동 집합 뒤로 캡슐화하는 것은 객체의 자율성을 높이고 협력을 단순하고 유연하게 만든다. 이것이 상태를 캡슐화해야 하는 이유다.

☑️ 식별자

- 어떤 객체를 다른 객체와 구분하는 데 사용하는 객체의 프로퍼티다.
- 객체는 상태가 변경될 수 있기 때문에 식별자를 이용한 동일성 검사를 통해 두 인스턴스를 비교 가능

# 3장. 타입과 추상화

- 추상화의 목적은
복잡성을 이해하기 쉬운 수준으로 단순화하는 것
    - 공통점을 취하고, 차이점은 버린다.
    - 중요한 것을 강조하고, 불필요한 세부사항은 제거한다.

- 개념(concept) : 공통점을 기반으로 객체들을 묶기 위한 그릇
- 객체와 인스턴스
    - 객체는 특정한 개념을 적용할 수 있는 구체적인 사물을 의미
    - 개념이 객체에 적용됐을 때 객체를 개념의 인스턴스라고 함

- 분류
    - 객체에 특정한 개념을 적용하는 작업
    - 분류를 함으로써 추상화가 가능해 진다.

- 타입은 동적으로 변하는 객체의 복잡성을 간단하게 해준다.
- 결국 타입은 추상화다. 타입을 이용하면 객체의 동적인 특성을 추상화할 수 있다.
- 따라서 타입은 시간에 따른 객체의 상태 변경이라는 복잡성을 단순화할 수 있는 방법이다.

3장의 전체적인 내용은 딱 2가지로 정리할 수 있다.

1. 행동 우선 - 타입을 나누는 기준은 객체가 수행하는 행동
2. 캡슐화 - 행동에 따라 객체를 분류하기 위해서는 외부에 제공해야하는 행동을 먼저 생각